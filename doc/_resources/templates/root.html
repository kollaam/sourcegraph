{{define "root"}}
	<!DOCTYPE html>
	<html lang="en">

		<head>
			<title>{{block "title" .}}Home{{end}} - Sourcegraph docs</title>
            <link rel="icon" type="image/png" href="https://about.sourcegraph.com/sourcegraph-mark.png" />
			<link rel="stylesheet" type="text/css" href="{{asset "style.css"}}" />
			<meta name="viewport" content="width=device-width, initial-scale=1" />

            <!-- Google Tag Manager -->
            <script>(function (w, d, s, l, i) {
                    w[l] = w[l] || []; w[l].push({
                        'gtm.start':
                            new Date().getTime(), event: 'gtm.js'
                    }); var f = d.getElementsByTagName(s)[0],
                        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                            'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
                })(window, document, 'script', 'dataLayer', 'GTM-TB4NLS7');</script>
            <!-- End Google Tag Manager -->

			{{block "head" .}}{{end}}
		</head>

		<body>
            <!-- Google Tag Manager (noscript) -->
            <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TB4NLS7" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
            <!-- End Google Tag Manager (noscript) -->

			<header id="header">
				<div class="container">
					<h1 id="logo"><a href="/"><img src="{{asset "sourcegraph-logo-docs.svg"}}" alt="Sourcegraph docs"></a></h1>
                    <form id="search-form" method="get" action="/search">
						<input type="text" id="search" name="q" value="{{block "query" .}}{{end}}" placeholder="" spellcheck="false" aria-label="Query" />
                        <input type="hidden" name="v" value="{{block "version" .}}{{end}}">
						<button id="search-button" type="submit" aria-label="Search">Search</button>
					</form>
                    {{block "versionSelector" .}}{{end}}
                    <div style="flex:1"></div>
                    <nav class="links">
                        <ul>
                            <li><a href="https://about.sourcegraph.com">About</a></li>
                            <li><a href="https://sourcegraph.com">Sourcegraph.com</a></li>
                        </ul>
                    </nav>
				</div>
			</header>

			<div id="page">
				<div class="container">
					{{block "content" .}}{{end}}
				</div>
			</div>

            <footer>
                <div class="container">
                    <nav class="links">
                        <ul>
                            <li><a href="https://about.sourcegraph.com">About Sourcegraph</a></li>
                            <li><a href="https://sourcegraph.com">Sourcegraph.com</a></li>
                            <li><a href="https://github.com/sourcegraph/sourcegraph">Code (GitHub)</a></li>
                            <li><a href="https://about.sourcegraph.com/terms">Terms</a></li>
                            <li><a href="https://about.sourcegraph.com/security">Security</a></li>
                            <li><a href="https://about.sourcegraph.com/privacy">Privacy</a></li>
                        </ul>
                    </nav>
                </div>
            </footer>

            <script src="{{asset "docs.js"}}?16"></script>
            {{with .Content}}
            <script>sgdocs.init(breadcrumbs = {{ .Breadcrumbs }});</script>
            {{else}}
            <script>
                sgdocs.init(breadcrumbs = null);
            </script>
            {{end}}
		</body>
	</html>
{{end}}

{{define "versionSelector"}}
    <div id="version-selector" class="dropdown version-dropdown ml-2" style="display:none"><!-- TODO(sqs) -->
        {{/* Update these after each release. */}} {{$previousReleaseRevspec := "v3.18.0"}} {{$previousReleaseVersion := "3.18"}} {{$currentReleaseRevspec := "v3.19.1"}} {{$currentReleaseVersion := "3.19"}} {{$nextReleaseVersion := "main"}}
        <button class="btn btn-outline dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          {{.ContentVersion}}{{/* If no version is specified we are on the currentReleaseVersion */}}{{if eq .ContentVersion ""}}{{$currentReleaseVersion}}{{end}}
        </button>

        <details-menu aria-label="Sourcegraph version" class="dropdown-menu m-0 p-0" aria-labelledby="Version Dropdown">
            <a rel="nofollow" class=" dropdown-item {{if eq .ContentVersion $currentReleaseVersion ""}}active{{end}}" href="/@{{$currentReleaseVersion}}/{{.ContentPagePath}}">{{$currentReleaseVersion}}<span class="current-branch ml-1">current</span></a>
            <a rel="nofollow" class=" dropdown-item {{if eq .ContentVersion $previousReleaseVersion}}active{{end}}" href="/@{{$previousReleaseVersion}}/{{.ContentPagePath}}">{{$previousReleaseVersion}}</a>
            <a rel="nofollow" class="dropdown-item {{if eq .ContentVersion $nextReleaseVersion}}active{{end}}" href="/@{{$nextReleaseVersion}}/{{.ContentPagePath}}">Unreleased</a>
        </details-menu>
    </div>
{{end}}
